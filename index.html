<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>occapp</title>
</head>
<body>
    <script type="text/javascript">
        //read parameters
        var params = function (document.location.search) {
            qs = qs.split('+').join(' ');
            var params = {},
            tokens,
            re = /[?&]?([^=]+)=([^&]*)/g;
            while (tokens = re.exec(qs)) {
              params[decodeURIComponent(tokens[1])] = decodeURIComponent(tokens[2]);
            }
            return params;
        }
        //create urls for app and for site
        var siteUrl = "https://ccstore-test-z3pa.oracleoutsourcing.com/wishlist";
        var appUrl = "occapp://";
        if params.inviteToken != null {
          if params.webUrl != null {
            siteUrl = params.webUrl + params.inviteToken;
          }
          appUrl = "occapp://invite/" + params.inviteToken;
        } else if params.wishlistId != null {
          if params.webUrl != null {
            siteUrl = params.webUrl + params.wishlistId;
          }
          appUrl = "occapp://wishlist/" + params.wishlistId;
        }
        //main redirection
        var now = new Date().valueOf();
        setTimeout(function () {
          if (new Date().valueOf() - now > 100) return;
          window.location = siteUrl;
        }, 300);
        window.location = appUrl;
    </script>
</body>
</html>
